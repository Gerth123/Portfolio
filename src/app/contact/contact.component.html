<section id="contact">
  <div class="container">
    <div class="headline">
      <div class="line"></div>
      <h2>{{ getCurrentText("headline") }}</h2>
    </div>
    <div class="textAndFormContainer">
      <div class="text" data-aos="fade-right">
        <h3>{{ getCurrentText("secondHeadline") }}</h3>
        <span>
          {{ getCurrentText("firstText") }}
        </span>
        <span
          >{{ getCurrentText("secondText") }}
          <b>{{ getCurrentText("thirdText") }}</b></span
        >
      </div>
      <div class="form" data-aos="fade-left">
        <form #ngForm="ngForm" (ngSubmit)="onSubmit(ngForm)" novalidate>
          <div class="inputContainer">
            <input
              type="text"
              id="name"
              name="name"
              pattern="^([a-zA-ZäöüÄÖÜß]{1}[a-zA-ZäöüÄÖÜß]*)(\s+[a-zA-ZäöüÄÖÜß]{1}[a-zA-ZäöüÄÖÜß]*)*$"
              [(ngModel)]="contactData.name"
              required
              placeholder="{{ getCurrentText('inputPlaceholderName') }}"
              autocomplete="name"
              (click)="changePlaceholder('name')"
              (blur)="resetPlaceholder('name')"
              #nameInput="ngModel"
              [ngClass]="{ inputError: nameInput.invalid && nameInput.touched,
            'checkboxChecked': nameInput.valid, 
           }"
            />
            <img
              *ngIf="nameInput.valid && nameInput.touched"
              src="../../assets/icons/input_icon_right.svg"
              class="inputIcon"
            />
            <img
              *ngIf="nameInput.invalid && nameInput.touched"
              src="../../assets/icons/input_icon_wrong.svg"
              class="inputIcon"
            />
          </div>
          <div
            [ngClass]="
              nameInput.invalid && nameInput.touched ? 'error' : 'error-hidden'
            "
          >
            <span class="errorMessage">{{ getCurrentText("errorName") }}</span>
          </div>

          <div class="inputContainer">
            <input
              type="email"
              id="email"
              name="email"
              pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
              [(ngModel)]="contactData.email"
              required
              placeholder="{{ getCurrentText('inputPlaceholderEmail') }}"
              autocomplete="email"
              (click)="changePlaceholder('email')"
              (blur)="resetPlaceholder('email')"
              #emailInput="ngModel"
              [ngClass]="{ 'inputError': emailInput.invalid && emailInput.touched,
            'checkboxChecked': emailInput.valid, 
           }"
            />
            <img
              *ngIf="emailInput.valid && emailInput.touched"
              src="../../assets/icons/input_icon_right.svg"
              class="inputIcon"
            />
            <img
              *ngIf="emailInput.invalid && emailInput.touched"
              src="../../assets/icons/input_icon_wrong.svg"
              class="inputIcon"
            />
          </div>

          <div
            [ngClass]="
              emailInput.invalid && emailInput.touched
                ? 'error'
                : 'error-hidden'
            "
          >
            <span class="errorMessage">{{ getCurrentText("errorEmail") }}</span>
          </div>

          <div class="textareaContainer">
            <textarea
              id="message"
              name="message"
              pattern="^[\s\S]{10,}$"
              [(ngModel)]="contactData.message"
              required
              lang="en"
              spellcheck="true"
              placeholder="{{ getCurrentText('inputPlaceholderMessage') }}"
              (click)="changePlaceholder('message')"
              (blur)="resetPlaceholder('message')"
              #messageInput="ngModel"
              [ngClass]="{
                inputError: messageInput.invalid && messageInput.touched,
                checkboxChecked: messageInput.valid
              }"
            ></textarea>
            <img
              *ngIf="messageInput.valid && messageInput.touched"
              src="../../assets/icons/input_icon_right.svg"
              class="inputIcon"
            />
            <img
              *ngIf="messageInput.invalid && messageInput.touched"
              src="../../assets/icons/input_icon_wrong.svg"
              class="inputIcon"
            />
          </div>
          <div
            [ngClass]="
              messageInput.invalid && messageInput.touched
                ? 'error'
                : 'error-hidden'
            "
          >
            <span class="errorMessage">{{
              getCurrentText("errorMessage")
            }}</span>
          </div>
          <div class="checkbox">
            <input
              type="checkbox"
              id="checkbox"
              required
              [(ngModel)]="contactData.privacyChecked"
              name="privacyChecked"
              #checkboxInput="ngModel"
            />
            <label
              for="checkbox"
              [ngClass]="{ 'inputError': checkboxInput.invalid && checkboxInput.touched,
                       'checkboxChecked': contactData.privacyChecked,
           }"
            ></label>

            <span>
              {{ getCurrentText("privacyFirstText") }}
              <a [routerLink]="['/privacy-policy']">
                {{ getCurrentText("privacySecondText") }}</a
              >
              {{ getCurrentText("privacyThirdText") }}
            </span>
          </div>
          <div
            [ngClass]="
              checkboxInput.invalid && checkboxInput.touched
                ? 'errorCheckbox'
                : 'errorCheckbox-hidden'
            "
          >
            <span class="errorMessagePrivacy">{{
              getCurrentText("errorPrivacy")
            }}</span>
          </div>
          <div
            [ngClass]="
              successMessage ? 'successMessage' : 'successMessage-hidden'
            "
          >
            {{ successMessage }}
          </div>

          <div [ngClass]="errorMessage ? 'errorMsg' : 'errorMsg-hidden'">
            {{ errorMessage }}
          </div>

          <div class="buttonContainer">
            <button
              type="submit"
              id="sendMessageButton"
              [disabled]="ngForm.invalid"
              [ngClass]="{
                sendMessageButton: ngForm.valid,
                sendMessageButtonFalse: ngForm.invalid
              }"
            >
              <span>{{ getCurrentText("buttonText") }} :)</span>
            </button>
          </div>
        </form>

        <div class="arrowUp">
          <a [routerLink]="['/']" [fragment]="'landingPage'" (click)="handleScroll('landingPage')"
            ><img
              src="../../assets/icons/arrow_up_contact.svg"
              alt="Arrow up"
              class="arrowUpImg"
          /></a>
        </div>
      </div>
    </div>
  </div>
</section>
